- action:
  - data:
      entity_id: switch.desk_lights_switch
    service: switch.turn_on
  alias: Turn on office lights on motion
  condition: []
  id: '1510272913093'
  trigger:
  - entity_id: binary_sensor.office_motion_sensor
    platform: state
    to: 'on'
- action:
  - data:
      entity_id: switch.desk_lights_switch
    service: switch.turn_off
  alias: Turn off office lights when there is no longer any motion
  condition: []
  id: '1510273028657'
  trigger:
  - entity_id: binary_sensor.office_motion_sensor
    for:
      minutes: 10
    platform: state
    to: 'off'
- action:
  - data:
      entity_id: light.dining_room
    service: light.turn_on
  alias: Turn on dining room light when someone comes home
  condition:
  - after: sunset
    after_offset: -02:00:00
    condition: sun
  id: '1510348109231'
  trigger:
  - entity_id: group.family
    platform: state
    to: home
- action:
  - data:
      message: High disk usage on /
      title: Alert
    service: notify.ios_gregs_iphone_8
  alias: Notify me when disk is getting full
  condition: []
  id: '1510357259596'
  trigger:
  - above: '75'
    entity_id: sensor.disk_used_
    platform: numeric_state
- alias: Alert when house becomes empty
  action:
  - service: notify.ios_gregs_iphone_8
    data_template:
      message: House is now empty. Enabling motion sensor alerts...
  - service: input_boolean.turn_on
    data:
      entity_id: input_boolean.enable_security
  condition: []
  id: '1510432731633'
  trigger:
  - entity_id: group.family
    platform: state
    to: not_home
- alias: Motion alert
  trigger:
  - entity_id: group.all_motion_sensors
    platform: state
    to: 'on'
  action:
  - data:
      message: A motion sensor has been tripped in the house
      title: Motion alert
    service: notify.ios_gregs_iphone_8
  id: '1510437227399'
  condition:
  - condition: state
    entity_id: group.family
    state: not_home
- alias: Enable internal camera recording
  trigger:
  - platform: state
    entity_id: group.family
    to: not_home
  action:
  - service: shell_command.landing_camera_enable_detection
  id: '1511218490670'
- alias: Disable internal camera recording
  trigger:
  - platform: state
    entity_id: group.family
    to: home
  action:
  - service: shell_command.landing_camera_disable_detection
  id: '1511218494340'
- alias: Low battery alert
  trigger:
    platform: numeric_state
    entity_id:
    - sensor.gregs_ipad_battery_level
    - sensor.gregs_iphone_8_battery_level
    - sensor.lynette_iphone_battery_level
    below: 20
  action:
  - service: notify.ios_gregs_iphone_8
    data_template:
      message: '{{ trigger.to_state.attributes.friendly_name }}''s is less than: 20%'
